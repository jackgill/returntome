#!/usr/bin/perl

use Mail::IMAPClient;

my $imap = Mail::IMAPClient->new(
				 Server   => 'imap.gmail.com',
				 User     => 'return.to.me.test@gmail.com',
				 Password => 'return2me',
				 Ssl      => 1,
				 Uid      => 1,
				 );

$imap->select( 'INBOX' ) or die "Select 'INBOX' error: ", $imap->LastError, "\n";

my @msgs = $imap->messages or die "Could not messages: $@\n";
for my $msg (@msgs) {
    my $subject = $imap->subject($msg);
    print $msg," : ",$subject,"\n";
}

$imap->logout or die "Logout error: ", $imap->LastError, "\n";
